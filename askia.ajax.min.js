(function(){function a(c,d){d=d||{bubbles:false,cancelable:false,detail:undefined};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype=window.Event.prototype;window.CustomEvent=a})();(function(){if(window.AskiaScript&!window.isDesignPreview){AskiaScript.executeLiveRouting=function(){}}var r=window.askia||{};if(!window.askia){window.askia=r}function h(t){return t.charAt(0).toUpperCase()+t.slice(1)}function e(u,z){if(typeof z!=="function"){return}var A=/^(?:submit|button|image|reset|file)$/i;var y=/^(?:input|select|textarea|keygen)/i;var t=/^(?:checkbox|radio)$/i;var w=u.elements;var v;for(v=0,l=w.length;v<l;v+=1){var x=w[v];if(!x.name||x.disabled||x.value===null||A.test(x.type)||!y.test(x.nodeName)||(t.test(x.type)&&!x.checked)){continue}z(x)}}r.serializeForm=function j(t,u){var v=[];e(t,function(x){var w=x.name;var y=x.value.replace(/\r?\n/gi,"\r\n");if(u&&/^(?:action)$/i.test(x.name)){y=u.replace(/\r?\n/gi,"\r\n")}v.push(encodeURIComponent(w)+"="+encodeURIComponent(y))});return v.join("&")};r.ajax=function m(u){if(!u){(console&&console.warn("The `query` argument must be a valid object for askia.ajax()"));return}if(!u.url||typeof u.url!=="string"){(console&&console.warn("The `query.url` argument must be a valid string for askia.ajax()"));return}u.method=((u.method&&u.method.toString())||"POST").toUpperCase();if(!/^(?:GET|POST|PUT|DELETE|HEAD|OPTIONS|TRACE|CONNECT)$/.test(u.method)){(console&&console.warn("The `query.method` argument must be a valid HTTP method for askia.ajax()"));return}var v=new XMLHttpRequest();v.open(u.method,u.url,true);v.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");v.onload=function t(){var w=v.responseText;if(v.status>=200&&v.status<400){if(typeof u.success==="function"){u.success(w,v)}}else{if(typeof u.error==="function"){u.error(w,v)}}if(typeof u.complete==="function"){u.complete(w,v)}};v.onerror=function(){if(typeof u.error==="function"){u.error(text,v)}if(typeof u.complete==="function"){u.complete(text,v)}};v.send(u.data||null)};r.defaultEventActions={askiaAnswer:q,askiaShowQuestion:k,askiaHideQuestion:k,askiaShowResponses:c,askiaHideResponses:c,askiaReload:p,askiaSetValue:null,askiaShowMessage:null,askiaChangeQuestionsOrder:null,askiaChangeResponsesOrder:null,askiaInfo:null,askiaUpdateCaption:f};r.triggerEvent=function b(t,u){var w=u!==undefined?{detail:u}:undefined;var v=new CustomEvent(t,w);return document.dispatchEvent(v)};r.hideResponses=function o(){r.defaultEventActions.askiaHideResponses()};r.triggerAnswer=function n(){if(!r.triggerEvent("askiaAnswer")){return false}r.defaultEventActions.askiaAnswer()};function k(y){if(!(y.question.inputCode>=0)){return}var u=/^(?:show)/i.test(y.action);var w=".askia-question-"+y.question.inputCode;var x=document.querySelectorAll(w);var v;var t;for(v=0,t=x.length;v<t;v+=1){x[v].style.display=u?"":"none"}}function c(w){if(!(w.question.inputCode>=0)){return}var B=".askia-question-"+w.question.inputCode;var t=w.order.length;var A=[];var y=document.querySelectorAll(B+" .askia-response");for(var x=0;x<y.length;x++){y[x].style.display=""}for(var u=0;u<t;u++){A.push(parseInt(w.order[u].inputCode))}for(var v=0;v<y.length;v++){var z=(y[v].children[0].id).split("_");if(A.indexOf(parseInt(z[1]))<0){if(document.getElementById("askia-input"+w.question.inputCode+"_"+parseInt(z[1]))!=null){document.getElementById("askia-input"+w.question.inputCode+"_"+parseInt(z[1])).checked=false;document.getElementById("askia-input"+w.question.inputCode+"_"+parseInt(z[1])).parentElement.style.display="none"}}}}function f(y){if(y.selector===""){return}var w=y.selector;var u=y.caption;var x=document.querySelectorAll(w);var v;var t;for(v=0,t=x.length;v<t;v+=1){x[v].innerHTML=u}}function p(){if(i){return}window.location.reload()}var s=false;var a=false;var i=true;function q(){if(s){a=true;return}s=true;a=false;r.ajax({url:"../cgi-bin/AskiaExt.dll"+window.location.search,data:r.serializeForm(document.forms[0],"DoLiveRouting"),success:g,complete:d})}function g(z){var w=JSON.parse(z);var y=w.actions||[];var v;var t;var x;var u;for(v=0,t=y.length;v<t;v+=1){x=y[v];u="askia"+h(x.action);if(!r.triggerEvent(u,x)){continue}if(typeof r.defaultEventActions[u]==="function"){console.log(u);r.defaultEventActions[u](x)}}}function d(){s=false;i=false;if(!a){return}setTimeout(q,250)}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("change",function(v){var u=v.target||v.srcElement;var t=/^[a-z]+([0-9]+)(?:\s*|\_*)/i.exec(u.name);if(t&&(window.arrLiveRoutingInputCode.indexOf(t[1])>-1)&&(((u.nodeName==="INPUT")&&(u.parentElement.className.indexOf("askia-response")>=0||u.parentElement.className.indexOf("askia-control")>=0||u.parentElement.className.indexOf("askia-grid-row")>=0||u.parentElement.parentElement.className.indexOf("askia-grid-row")>=0)&&(u.type==="radio"||u.type==="checkbox"))||u.nodeName==="SELECT")){r.triggerAnswer()}});document.addEventListener("input",function(v){var u=v.target||v.srcElement;var t=/^[a-z]+([0-9]+)(?:\s*|\_*)/i.exec(u.name);if(t&&(window.arrLiveRoutingInputCode.indexOf(t[1])>-1)&&(((u.nodeName==="TEXTAREA")||((u.nodeName==="INPUT")&&(u.type==="color"||u.type==="date"||u.type==="datetime"||u.type==="email"||u.type==="month"||u.type==="number"||u.type==="password"||u.type==="range"||u.type==="search"||u.type==="tel"||u.type==="text"||u.type==="time"||u.type==="url"||u.type==="week")))&&(u.parentElement.className.indexOf("askia-response")>=0||u.parentElement.className.indexOf("askia-control")>=0||u.parentElement.className.indexOf("askia-grid-row")>=0||u.parentElement.parentElement.className.indexOf("askia-grid-row")>=0||u.className.indexOf("askia-live")>=0))){r.triggerAnswer()}});if(window.arrLiveRoutingShortcut&&window.arrLiveRoutingShortcut.length>=1){r.triggerAnswer()}})}());